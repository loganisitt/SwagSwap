angular.module("Bazaaru",["ngCookies","ngResource","ngMessages","ngRoute","mgcrea.ngStrap"]).config(["$locationProvider","$routeProvider",function(a,b){a.html5Mode(!0),b.when("/",{templateUrl:"views/home.html",controller:"MainCtrl"}).when("/shows/:id",{templateUrl:"views/detail.html",controller:"DetailCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/signup",{templateUrl:"views/signup.html",controller:"SignupCtrl"}).when("/add",{templateUrl:"views/add.html",controller:"AddCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("Bazaaru").controller("LoginCtrl",function(a,b){console.log("LoginCtrl"),a.login=function(){console.log("login"),b.login({email:a.email,password:a.password})},a.facebookLogin=function(){console.log("facebookLogin"),b.facebookLogin()}}),angular.module("Bazaaru").controller("MainCtrl",function(){}),angular.module("Bazaaru").controller("NavbarCtrl",function(a,b){a.logout=function(){b.logout()}}),angular.module("Bazaaru").controller("SignupCtrl",["$scope","Auth",function(a,b){a.signup=function(){b.signup({email:a.email,password:a.password})}}]),angular.module("Bazaaru").directive("repeatPassword",function(){return{require:"ngModel",link:function(a,b,c,d){var e=b.inheritedData("$formController")[c.repeatPassword];d.$parsers.push(function(a){return a===e.$viewValue?(d.$setValidity("repeat",!0),a):void d.$setValidity("repeat",!1)}),e.$parsers.push(function(a){return d.$setValidity("repeat",a===d.$viewValue),a})}}}),angular.module("Bazaaru").factory("Auth",["$http","$location","$rootScope","$cookieStore","$alert","$window",function(a,b,c,d,e,f){return c.currentUser=d.get("user"),d.remove("user"),f.fbAsyncInit=function(){FB.init({appId:"1516935388567818",responseType:"token",version:"v2.0"})},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk"),{facebookLogin:function(){},login:function(d){return a.post("/api/login",d).success(function(a){c.currentUser=a,b.path("/"),e({title:"Cheers!",content:"You have successfully logged in.",placement:"top-right",type:"success",duration:3})}).error(function(){e({title:"Error!",content:"Invalid username or password.",placement:"top-right",type:"danger",duration:3})})},signup:function(c){return a.post("/api/signup",c).success(function(){b.path("/login"),e({title:"Congratulations!",content:"Your account has been created.",placement:"top-right",type:"success",duration:3})}).error(function(a){e({title:"Error!",content:a.data,placement:"top-right",type:"danger",duration:3})})},logout:function(){return a.get("/api/logout").success(function(){c.currentUser=null,d.remove("user"),e({content:"You have been logged out.",placement:"top-right",type:"info",duration:3})})}}}]);